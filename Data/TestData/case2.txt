

灵云能力平台7.1.0(TTS)
测试报告





密    级	五星
编    号	HCC16052
项目经理	陈明
测试经理	李子翀
审    核	技术委员会

灵云科技 源自清华 服务全球

北京捷通华声科技股份有限公司
Beijing SinoVoice Technology Co.,Ltd.

2016年08月08日



目录
1	引言	1
1.1.1	编写目的	1
1.1.2	背景	1
1.1.3	项目背景	1
1.1.4	测试目标	1
1.1.5	项目信息	2
1.1.6	术语定义	2
1.1.7	参考资料	2
2	测试概要	3
2.1.1	测试内容以及方法	3
2.1.2	测试环境与配置	5
2.1.3	功能测试	5
2.1.4	性能测试	6
2.1.5	压力测试	6
3	测试结果与缺陷统计	7
3.1.1	测试执行情况与记录	7
3.1.1.1	测试组织	7
3.1.1.2	测试版本	7
3.1.1.2.1	基础模块	7
3.1.1.2.2	能力模块	7
3.1.1.2.1	管理后台	7
3.1.1.2.2	数据库脚本：	8
3.1.1.2.1	标准版SDK模块：	8
3.1.1.2.2	企业版SDK模块	8
3.1.1.2.3	授权制作工具	8
3.1.1.2.4	TTS引擎MD5值对比	8
3.1.2	缺陷的统计	9
3.1.2.1	缺陷汇总	9
3.1.2.1.1	文档	9
3.1.2.1.2	部署	9
3.1.2.1.3	核心服务	9
3.1.2.1.4	企业版SDK	10
3.1.2.1.5	管理后台	10
3.1.3	TTS一致性效果测试	10
3.1.4	性能测试结果	10
3.1.4.1	HTTP访问TTS接口不使用SLB服务时性能测试结果（通用模块R5335,能力模块R5335+R5347）	10
3.1.4.2	SOCKET访问TTS接口性能测试结果（通用模块R5335,能力模块R5335+R5535+5557，企业版SDK R5538）	11
4	测试结论与建议	14
4.1.1	测试结论	14
4.1.1.1	文档测试结论	14
4.1.1.2	部署测试结论	15
4.1.1.3	功能测试结论	15
4.1.1.4	性能测试结论	15
4.1.1.5	压力测试结论	15
4.1.2	建议	21
4.1.2.1	项目各个阶段产出物的验证	21
4.1.2.2	项目周期安排	22

































修订记录
版本编号	修订日期	修订人	说    明
V1.0	20160808	马跃	创建测试报告
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			



 
1	引言
1.1.1	编写目的
灵云能力平台7.1.0测试报告旨在总结测试阶段的测试过程以及分析测试结果，描述语音能力平台是否符合需求，达到立项目标。预期参考人员包括用户，测试人员，开发人员，项目负责人以及产品负责人以及其他可能有相关阅读需求的高层人员。
1.1.2	背景
1.1.3	项目背景
本项目主要是根据需求分析和设计，组织项目成员进行编码、设计、测试等工作，完成并最终发布灵云能力平台7.1.0。
1.1.4	测试目标
私有云挂接TTS（通用版）。
完成的目标：
1．提供网络版
a)	使用统一新架构,支持HTTP、MRCP、Socket
b)	网络版Socket接口SDK，和现有jTTS一致。
c)	网络版授权采用私有云授权统一处理。
2.	额外提供本地版（这点和其他能力都不一样，其他能力的本地版均由灵云SDK提供）
a)	本地SDK和现有jTTS保持一致
b)	本地版授权和原jTTS一致，不依赖于私有云服务器。(但读取新的授权文件)
3.	架构调整
a)	由CU和jTTS_SDK共同调用jTTS_ML，（以前是CU调用jTTS_SDK）
b)	将SSML处理从jTTS_ML抽出，加入引擎挂接层中。这样jTTS_ML只负责分发请求。
4.	支持常用大音库挂接(wangjing、xiaokun)
5.	梳理对标记语言的支持
6.	目录结构向私有云靠拢
   






1.1.5	项目信息
项目名称	灵云能力平台7.1.0	项目编号: HCC16052
项目属性： ■正式项目      □临时项目      □临时任务
产品经理： 	策划：陈明
项目经理：陈明 	开发人员：陈文鹏、王能
送测人：陈文鹏、王能 	测试执行人：张永杰、马跃、代立坡、刘刚
测试时间	开始测试时间:
2016年03月08日	计划提交时间:
2016年04月29日	实际测试完成时间:
2016年08月08日
1.1.6	术语定义
无
1.1.7	参考资料
1.	《项目立项报告（ 灵云能力平台7.1.0（TTS））》
2.	《灵云能力平台7.1.0项目设计》
3.	《灵云能力平台7.1.0(TTS)开发手册》
4.	《灵云能力平台7.1.0(TTS) 企业版SDK开发手册》
5.	《灵云能力平台7.1.0(TTS) 平台版本部署说明》
6.	《灵云能力平台7.1.0(TTS) 服务器版本部署说明》
7.	《灵云能力平台7.1.0(TTS) HTTP开发手册》
8.	《jTTS_SDK常量列表》
9.	《jTTS_SDK函数列表》
10.	《jTTS_SDK环境和配置描述》
11.	《jTTS_SDK数据结构》
12.	《jTTS_SDK用户通知》
13.	《jTTS标记规范》
14.	《初始化语音合成系统》
15.	《关闭语音合成系统》
16.	《设置语音合成系统参数》
17.	《设置语音合成系统参数》
18.	《设置语音合成系统参数》
19.	《语音合成会话》
20.	《TTS企业版SDK测试需求》
21.	《TTS企业版SDK测试用例》
22.	《灵云能力平台7.1.0 TTS_HTTP接口测试用例》
23.	《灵云能力平台7.1.0_S3ML标记语言测试需求》
24.	《灵云能力平台7.1.0_S3ML标记语言测试用例》
25.	《灵云能力平台7.1.0_SSML标记语言测试用例》
26.	《灵云能力平台7.1.0_unimrcp v2测试用例V1.0》
27.	http://10.0.0.193:8080/zentao/bug-browse-167-bySearch-myQueryID.html
2	测试概要
2.1.1	测试内容以及方法
编号	模块	测试计划	实际测试内容
1	文档测试	审查测试依赖文档内容是否明确	同测试计划
2	部署测试	通过按照部署文档验证交测模块，对部署文档以及交测模块同时进行验证	同测试计划
3	http接口访问tts服务	1、	执行测试用例，向http接口服务发送请求进行功能测试
2、	编写性能测试脚本， http接口服务发送请求进行性能测试
3、	编写压力测试脚本，向http接口服务发送请求进行压力测试	
4	Socket接口访问tts服务	1、	执行测试用例，通过企业版sdk向socket接口服务发送请求进行功能测试
2、	编写性能测试脚本，在http的最大并发的情况，进行 socket接口服务发送请求进行性能测试（实时率）
3、	编写压力测试脚本，向socket接口服务发送请求进行压力测试	同测试计划
5	Mrcp接口访问tts服务	1、	执行测试用例，通过mrcp测试工具访问mrcp接口服务发送请求进行功能测试。验证mrcp服务支持tts服务
2、	编写压力测试脚本，向mrcp接口服务发送请求进行压力测试	同测试计划
6	企业版SDK	Windows版本本地SDK
1、	搭建本地版SDK的测试环境，制作本地版SDK的授权文件
2、	执行测试用例，验证本地版SDK的功能
Linux版本本地SDK
1、	搭建本地版SDK的测试环境，制作本地版SDK的授权文件
2、	执行测试用例，验证本地版SDK的功能
Windows版本网路版SDK
1、	搭建windows平台网络版SDK的测试环境
2、	执行测试用例，通过SOCKET接口向网络服务发送请求，验证网络版SDK功能
Linux版本网络版SDK
1、	搭建Linux平台网络版SDK的测试环境
2、	执行测试用例，通过SOCKET接口向网络服务发送请求，验证网络版SDK的功能
Windows平台企业版SDK小工具验证
1、	搭建windows平台企业版SDK的测试环境
2、	验证windows企业版SDK的小工具的功能
	同测试计划
7	标准版SDK	1、	执行测试用例，通过标准版SDK通过HTTP接口服务发送请求进行功能测试。
	同测试计划
8	一致性验证	1、	使用同一文本，在Windows32位平台和Windows64位平台上分别合成音频，对合成出的音频进行二进制比对
2、	使用同一文本，在Windows64位和Linux64位上分别合成音频，对合成的音频进行二进制比对
3、	使用同一文本，在Suse和Redhat平台上分别合成音频，对合成的音频进行二进制比对。	同测试计划
9	不带管理后台的能力平台	对不带管理后台版本的能力平台进行接口服务功能验证，以及1天的压力测试	同测试计划
10	SUSE11sp1操作系统兼容性测试	对SUSE操作系统下的能力平台进行功能，性能以及压力验证	同测试计划
11	授权制作工具	通过制作实际测试中所用授权，验证授权工具制作授权的正确性	同测试计划
2.1.2	测试环境与配置
2.1.3	功能测试
名称	硬件配置	软件配置	部署环境
测试环境216	CPU：Intel(R) Xeon(R) CPU E5-2609 v2 @ 2.50GHz  8核
内存 64G	操作系统  Red Hat Enterprise Linux Server release 6.2 (Santiago) x64
Jdk：jdk1.7.0_40
Mysql：mysql server5.1.66
Tomcat：tomcat-7.0.42
Redis：通用部署工具的redis	1能力平台以及管理后台
2智能客服产品

测试环境57	CPU：8核 
主频：Intel(R) Xeon(R) CPU E5506 @ 2.13GHz
内存：62G	操作系统  Red Hat Enterprise Linux Server release 6.3(Santiago) x64
Redis：通用部署工具的redis	能力平台不带管理后台
测试环境117	CPU：8核 
主频：Intel(R) Xeon(R) CPU E5-2609 v2 @ 2.50GHzz
内存：32G	操作系统  SUSE Linux Enterprise Server 11 SP3  (x86_64)
Redis：通用部署工具的redis	能力平台
测试环境163	CPU：Intel(R) Xeon(R) CPU E5-2609 v2 @ 2.50GHz 8核
内存：62G	操作系统SUSE Linux Enterprise Server 11 (x86_64) 
Jdk：jdk1.7.0_40
Mysql：mysql server5.0.67
Tomcat：tomcat-7.0.42	能力平台带管理后台
2.1.4	性能测试
名称	硬件配置	软件配置	部署环境
测试环境57	CPU：8核 
主频：Intel(R) Xeon(R) CPU E5506 @ 2.50GHz
内存：32G	操作系统  Red Hat Enterprise Linux Server release 6.3(Santiago) x64
Redis：通用部署工具的redis	能力平台
测试环境54	CPU：8核 
主频：Intel(R) Xeon(R) CPU E5-2609 v2 @ 2.50GHzz
内存：32G	操作系统  SUSE Linux Enterprise Server 11 SP3  (x86_64)
Redis：通用部署工具的redis	能力平台

2.1.5	压力测试
名称	硬件配置	软件配置	部署环境
测试环境216	CPU：Intel(R) Xeon(R) CPU E5-2609 v2 @ 2.13GHz  8核
内存 64G	操作系统  Red Hat Enterprise Linux Server release 6.2 (Santiago) x64
Jdk：jdk1.7.0_40
Mysql：mysql server5.1.66
Tomcat：tomcat-7.0.42
Redis：通用部署工具的redis	1能力平台以及管理后台r5335
 2TTS能力模块：
 R5335+R5535
SDK r5538
测试环境55	CPU：8核 
主频：Intel(R) Xeon(R) CPU E5506 @ 2.13GHz
内存：32G	操作系统  Red Hat Enterprise Linux Server release 6.3(Santiago) x64
Jdk：jdk1.7.0_40
Mysql：mysql server5.1.66
Tomcat：tomcat-7.0.42
Redis：通用部署工具的redis	1能力平台以及管理后台
2  TTS r6115版本
测试环境54	CPU：8核 
主频：Intel(R) Xeon(R) CPU E5-2609 v2 @ 2.50GHzz
内存：32G	操作系统  SUSE Linux Enterprise Server 11 SP3  (x86_64)
Redis：通用部署工具的redis	能力平台
测试环境163	CPU：Intel(R) Xeon(R) CPU E5-2609 v2 @ 2.50GHz 8核
内存：62G	操作系统SUSE Linux Enterprise Server 11 (x86_64) 
Jdk：jdk1.7.0_40
Mysql：mysql server5.0.67
Tomcat：tomcat-7.0.42	能力平台带管理后台
TTS能力服务r5335+5535 http接口


3	测试结果与缺陷统计
3.1.1	测试执行情况与记录
3.1.1.1	测试组织
编号	模块	测试人员	起止时间
1	文档测试	张永杰、马跃、代立坡	2016.03.08-2016.08.08
2	部署测试	张永杰、马跃、代立坡	2016.03.08-2016.08.08
3	http接口访问tts服务（功能，性能以及压力）	马跃、代立坡	2016.03.08-2016.08.08
4	socket接口访问tts服务（功能，性能以及压力）	张永杰、马跃	2016.03.08-2016.08.08
5	mrcp接口访问tts服务（功能，性能以及压力）	张永杰	2016.03.08-2016.08.08
6	一致性验证	张永杰	2016.03.08-2016.08.08
7	不带管理后台的能力平台	张永杰、马跃、代立坡、冯帆	2016.03.08-2016.08.08
8	标准版SDK	张永杰、刘刚	2016.03.08-2016.08.08
9	SUSE11SP1操作系统兼容性测试	张永杰、马跃、代立坡	2016.03.08-2016.08.08
3.1.1.2	测试版本
3.1.1.2.1	基础模块
通用模块测试版本：r5153,r5246,r5273,r5335,r5337,r5374,r5419,r5506,r5601,r5748,r5814
r5816,r5874,r5914,r5959,r5970,r6003
基础模块最终版本：r5970+r6003
3.1.1.2.2	能力模块
能力模块测试版本：r5152,r5153,r5246,r5273,r5335,r5347,r5535,r5557,r5695,r5816,r5867,r5984
                  r6036,r6115
能力模块最终版本：r6115
3.1.1.2.1	管理后台
HCICPM模块：
测试版本：r4844，r4879，r4884,r4921
终测版本：r4921

HCICPMPROTOCAL模块：
测试版本：r4845，r4878
终测版本：r4878

HCICPMAPPDATA(模型管理后台)模块：
测试版本：r4886，r4922，r4928
终测版本：r4928
3.1.1.2.2	数据库脚本：
MYSQL终测版本：r4927

3.1.1.2.1	标准版SDK模块：
TTS模块：
测试版本：r23010_TTS_PATCH_PRIVATE_CLOUD
终测版本：r23010_TTS_PATCH_PRIVATE_CLOUD
3.1.1.2.2	企业版SDK模块
企业版SDK测试版本：r5152,r5153,r5246,r5256,r5273,r5335,r5360,r5364,r5436,r5524,r5538
                     r5538,r5571,r5701,r5971,r6039,r6054

企业版SDK最终版本：r5701+r6054增量包
3.1.1.2.3	授权制作工具
授权制作工具测试版本：r5436,r5913
授权制作工具最终版本：r5913

3.1.1.2.4	TTS引擎MD5值对比
引擎版本：r5821
SVN引擎的MD5	引擎库文件	平台中引擎MD5
ec55b44267790b332e210dc6d4caebe0	libjTTS_Analyze.so	ec55b44267790b332e210dc6d4caebe0
b112d9daf02fc6bdb241a21ac9be1dec	libjTTS_Domain.so	b112d9daf02fc6bdb241a21ac9be1dec
0a8111aa54059f78746670e6a15af5f2	libjTTS_Engine.so	0a8111aa54059f78746670e6a15af5f2
2b0c4364445a2763fadd2e17f87b16bb	libjTTS_Plan.so	2b0c4364445a2763fadd2e17f87b16bb
f98753c85d19aa5f678905330bd9e00a	libjTTS_Synth.so	f98753c85d19aa5f678905330bd9e00a


3.1.2	缺陷的统计
3.1.2.1	缺陷汇总
3.1.2.1.1	文档
本项目中文档测试共发现bug7个，已经全部关闭。
3.1.2.1.2	部署
本项目中部署测试共发现bug17个，已全部关闭。
3.1.2.1.3	核心服务
本项目中核心服务测试共发现bug 21个，除已关闭的bug外，设计如此3个，延期处理3个，详细如下：
ID		标题	方案
23230
2	【MRCP】使用r5246版本的核心服务在进行mrcp测试时，设置Content-Type:text/uri-list
时预期返回004 error 实际返回402 complete 设计case Test_MRCP_SET-PARAM837
   设计如此
23231
2	【MRCP】使用r5246版本的核心服务在进行mrcp测试时，设置Content-Length:0时预期返回407 complete 实际返回402complete 设计case：Test_MRCP_CONTENT-LENGTH904.mrcp
设计如此
23232
2	【MRCP】使用r5246版本的核心服务在进行mrcp测试时，设置Content-Type: 124（非法值时）预期返004 error 实际返回402 complete 设计case Test_MRCP_CONTENT-TYPE1103.mrcp等
设计如此
23228
1	【MRCP】使用r5246版本的核心服务在进行mrcp测试时，使用SPEECH-MARKER事件标记合成文本中mark标签的时间戳 ，当前版本无法正常标记
延期处理
23320
2	【TTS服务测试】 测试tagmode=s3ml, 标记语言为：emphasis 格式时，重度程度设置不同格式时，效果都相同，无法区分重读程度，合成音频和直接调用Jtts服务返回值一样
延期处理
23321
2	【TTS服务测试】 使用同一段文本 ，测试voicestyle=normal plain clear vivid 合成的音频没有效果， 合成音频和直接调用Jtts服务返回值一样
延期处理

3.1.2.1.4	企业版SDK
本项目中核心服务测试共发现bug 46个，除已关闭的bug外，外部原因1个，设计如此3个，延期处理3个，详细如下：

ID		BUG标题	方案
23330
2	【TTS】linux 32位企业版sdk 检测参数 dwFlag的参数时，case进程存在卡死的现象，日志不刷新
外部原因
23240
2	【tts 企业版sdk】本地版 检测pszVoiceID 不合法时 预期返回结果 27（参数错误），实际返回结果24（合法的选项，但目前版本不支持 ）
设计如此
24073
3	【企业SDK】jTTS_Show.exe 工具初始化时，<请输入开发序列号>，此项应该不需要，请去掉
设计如此
24077
3	【企业SDK】jTTS_Test.exe工具，在初始化中显示【请输入序列号】 此项在此处无任何意义，是否可以去掉，见附件中的提示信息建议优化
设计如此
23234
2	【tts 企业版sdk】【playtofile】本地版tts当传入合成的文本为null和音频文件时，返回合成成功，而网络版时返回39, 本地版与网络版表现不一致
延期处理
23336
2	【企业SDK】【Win64】【Play】当前的SDK使用该接口无法播放英文
延期处理
24076
3	【企业SDK】jTTS_SysInfo.exe工具中 【授权信息】按钮下的版本显示：专业版 ，【各音库授权信息】下的组号列和组授权数列为空，见附件
延期处理

3.1.2.1.5	管理后台
 本项目中管理后台测试未发现bug。
3.1.3	TTS一致性效果测试
使用同一文本，在win32和win64平台进行合成，通过对比合成录音得出结果一致
使用同一文本，在windows64和linux64平台进行合成，通过对比合成录音得出结果一致
使用同一文本，在linux32和linux64平台进行合成，通过对比合成录音得出结果一致
TTS的一致性效果测试通过
3.1.4	性能测试结果
3.1.4.1	http访问TTS接口不使用slb服务时性能测试结果（通用模块r5335,能力模块r5335+r5347）
服务端
线程数	日志级别	io_threads_num	最大并发	vsure	tps	平均响应时间(s)
/最大响应时间（s）	cpu	内存(M)	虚存(M)
tts：56 
http：160	tts:DEBUG
http:DEBUG 	4	142	32	69.874	0.532	616%-660%	724-750	5865-5875
				64	73.785	0.835	655%-675%	755-766	6126
				90	79.316	1.098/1.193	640%-660%	820-840	6156
				112	74.02	1.398/5.298	606%-660%	828-840	6165
				128	78.195	1.518	628%-670%	760-770	6136
tts:56 
http:160	tts:FATAL
http:FATAL 	4	150	32	100.598	0.295	750%-780%	770-810	5901
				64	101.138	0.603/1.173	750%-780%	845-860	6126
				90	102.324	0.847/2.408	760%-780%	900-920	6156
				112	91.648	1.126/4.174	760%-790%	890-910	6156
				128	91.884	1.293/3.325	760%-780%	850-915	6126
tts:56 
http:160	tts:DEBUG
http:DEBUG 	3	——	90	79.352	1.097/1.885	622%-675%	750-780	6116
				112	77.43	1.335/2.270	626%-670%	790-800	6116
				64	75.424	0.812/2.647	630%-650%	760-790	6116
tts:56 
http:160	tts:DEBUG
http:DEBUG 	1	—— 	90	70.387	1.231/4.318	610%-670%	750-780	6106
				112	73.293	1.416/5.025	610%-670%	750-780	6106
				64	68.669	0.896/2.235	580%-650%	760-814	6106-6086
综上：io_threads_num 为4和3时   服务端 tts 56线 http 160线  在客户端为90线时，性能结果达到最优   debug级别日志的最大并发数为142线，FATAL级别日志的最大并发数为 150线。（最大并发指合成的音频时长与平均返回时间相等时的最大并发数）
3.1.4.2	Socket访问TTS接口性能测试结果（通用模块r5335,能力模块r5335+r5535+5557，企业版SDK r5538）
1、Socket接口的io_thread_num的值为4
服务端配置	企业SDK客户端
配置	客户端吞吐量
（byte）	服务端吞吐量
（byte）	最短合成时间
（s）	最长合成时间
（s）	平均合成时间
（s）	服务端资源消耗	服务器配置及
测试数据
TTS线程数：56
SOCKET线程数：160
TTS日志级别：DEBUG
SOCKET日志级别：DEBUG
TTS的io_thread_num值：4
SOCKET的io_thread_num值：4
SLB：不使用	并发数：60
日志级别：FATAL	85.984265	265179.5196	0.089099	2.801471	0.988553	CPU：616%-780%
内存：862m-889m
虚存：6126m	IP：10.0.1.57
CPU：Intel(R) Xeon(R) CPU E5-2609 v2 @ 2.50GHz
内存：32G
核数：8
网卡：千兆网卡
"（部署版本：通用模块r5335 和能力模块
 r5335+ r5535+r5557版本企业SDK r5538 ）"
测试数据：85字节
								
								
								
	并发数：70
日志级别：FATAL	98.28377	303111.7727	0.115064	2.339124	0.864843	CPU：616%-780%
内存：862m-889m
虚存：6126m	
								
								
	并发数：80
日志级别：FATAL	74.540632	229886.8177	0.09981	2.989047	1.140318	CPU：613%-720%
内存：862m-889m
虚存：6126m	
								
								
	并发数：90
（HTTP性能最优线程数）
日志级别：FATAL	67.56352	208369.0748	0.088595	4.253717	1.258075	CPU：580%-665%
内存：832m-855m
虚存：6176m	
								
								


2、Socket接口的io_thread_num的值为1

服务端配置	企业SDK客户端
配置	客户端吞吐量
（byte）	服务端吞吐量
（byte）	最短合成时间
（s）	最长合成时间
（s）	平均合成时间
（s）	服务端资源消耗	服务器配置
及测试数据
TTS线程数：56
SOCKET线程数：160
TTS日志级别：DEBUG
SOCKET日志级别：DEBUG
TTS的io_thread_num值：4
SOCKET的io_thread_num值：4
SLB：不使用
	并发数：60
日志级别：FATAL	86.405563	266478.8236	0.085374	2.964391	0.983733	CPU：616%-780%
内存：862m-889m
虚存：6126m	IP：10.0.1.57
CPU：Intel(R) Xeon(R) CPU E5-2609 v2 @ 2.50GHz
内存：32G
核数：8
网卡：千兆网卡
（部署版本：通用模块r5335 
和能力模块 r5335+ r5535+r5557版本企业SDK r5538 ）
测试数据：85字节
								
								
								
	并发数：70
日志级别：FATAL	98.740995	304521.8756	0.085374	2.30775	0.860838	CPU：616%-780%
内存：862m-889m
虚存：6126m	
								
								
	并发数：80
日志级别：FATAL	76.675397	236470.5324	0.102959	2.592675	1.108569	CPU：613%-720%
内存：862m-889m
虚存：6126m	
								
								
	并发数：90
（HTTP性能最优线程数）
日志级别：FATAL	70.176989	216429.1354	0.086038	3.496043	1.211223	CPU：580%-665%
内存：832m-855m
虚存：6176m	
								
								

      
TTS性能数据分析如下：

60线
最大耗时3265ms分析

断句引擎耗时为548ms 
检查TaskConfig耗时339ms
调用引擎SessionStart 耗时467ms
调用引擎SessionGetData 耗时46ms、138ms、145ms、70ms、120ms
引擎耗时261ms
网络消耗 request_agent->TTS 460ms， TTS->request_agent 350ms。（网络耗时一共810ms）
SDK消耗29ms


70线
最大耗时3656ms分析

断句引擎耗时为360ms
检查TaskConfig耗时399ms
调用引擎SessionStart 耗时406ms
调用引擎SessionGetData 耗时120ms、39ms、36ms、102ms、73ms、121ms
引擎耗时393ms
网络消耗 request_agent->TTS 588ms， TTS->request_agent 817ms。（网络耗时一共1405ms）
SDK消耗15ms

80线
最大耗时3990ms分析

断句引擎耗时为341ms 
检查TaskConfig耗时521ms
调用引擎SessionStart 耗时525ms
调用引擎SessionGetData 耗时16ms、6ms、2ms、43ms、104ms
引擎耗时849ms
网络消耗 request_agent->TTS 588ms， TTS->request_agent 671ms。（网络耗时一共1269ms）
SDK消耗16ms

90线
最大耗时3924ms分析

断句引擎耗时为370ms 
检查TaskConfig耗时463ms
调用引擎SessionStart 耗时443ms
调用引擎SessionGetData 耗时22ms、30ms、38ms、67ms、5ms、38ms
引擎耗时164ms
网络消耗 request_agent->TTS 737ms， TTS->request_agent 1069ms。 （网络耗时一共1806ms）
SDK消耗41ms

在并发较大时，网络的消耗时候比较大。引擎合成音频的耗时没有明显变化，SDK耗时较少没有明显变化

4	测试结论与建议
4.1.1	测试结论
4.1.1.1	文档测试结论
对开发手册 《灵云能力平台7.1.0(TTS) HTTP开发手册》、《灵云能力平台7.1.0(TTS) 企业版SDK开发手册》、两份开发手册进行阅读，手册编写完整、结构清晰，内容通俗易懂，没有明显的语句错误，为读者提供了良好的开发指南。

【文档测试通过】

4.1.1.2	部署测试结论
阅读《灵云能力平台7.1.0(TTS) 服务器版本部署说明》 《灵云能力平台7.1.0(TTS) 平台版本部署说明》二份文档，根据文档内容，在公司测试环境进行环境搭建过程中及更新过程未发现指导性错误，文档编写完整有效。

【部署测试通过】

4.1.1.3	功能测试结论

灵云能力平台7.1.0 TTS服务功能测试完成，并经讨论，禅道上没有无解决方案并不可忽略的bug。
【功能测试通过】

灵云能力平台7.1.0 企业版SDK功能测试完成并经讨论，禅道上没有无解决方案并不可忽略的bug。
【功能测试通过】
4.1.1.4	性能测试结论
灵云能力平台7.1.0 通过LoadRunner性能测试工具通过http接口对tts服务进行性能测试，测试反馈性能结果，性能测试完成。
灵云能力平台7.1.0通过socket接口在http接口测试出的最大的并发的情况下进行实时率的测试，测试反馈性能结果，性能测试完成。
灵云能力平台7.1.0 通过mrcp接口在物理核数的四倍的情况下进行识别耗时的测试，测试反馈结果，性能测试完成。

4.1.1.5	压力测试结论
TTS模块：
通过100线并发访问TTS的http接口进行压力测试，压力测试过程中http内存及cpu占用稳定，TTS的cpu占用稳定，通过http接口访问TTS能力服务压力测试72h通过。
      

 
 
 
通过148线并发访问TTS socket接口进行压力测试，压力测试过程中socket接口的内存及cpu占用稳定，TTS cpu占用稳定，tts的内存在前期存在上升，后期内存平稳，通过socket接口访问tts能力服务压力测试72h通过。
   
 
 
 

通过128线并发访问TTS的mrcp接口进行压力测试，压力测试中mrcp的cpu占用稳定mrcp的内存占用稳定， TTScpu占用稳定，TTS内存有轻微上升趋势 在预期范围内，通过mrcp接口访问tts能力服务压力测试72h完成并通过



 
  
 

Suse11sp1操作系统下http&socket&mrcp访问tts服务功能回归，性能测试以及压力测试24h验证，服务内存以及cpu占用稳定正常，压力测试通过

4.1.2	建议
4.1.2.1	项目各个阶段产出物的验证
在项目立项以及设计初期多沟通，明确产出物的各个模块的形态以及依赖关系等设计，并且以文档形式记录。立项后，在项目涉及项目的产出物阶段，增加对产出物的评审验证力度
4.1.2.2	项目周期安排
在项目立项以及设计讨论完成后，各个模块负责人合理预估对应模块工时，反馈项目经理，项目经理把控项目进度以及周期。
测试人员：张永杰、马跃、代立坡、冯帆
日    期：2016.08.08

